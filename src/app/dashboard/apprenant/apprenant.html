<p class="text-lg font-semibold mb-4">apprenant works!</p>
<button (click)="logout()" class="mb-6 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">
  Logout
</button>

<div class="max-w-6xl mx-auto p-4">
  <h1 class="text-3xl font-bold mb-6 text-center">Courses List</h1>

  <!-- Filters -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
    <input
      type="text"
      [(ngModel)]="searchText"
      placeholder="Search by title..."
      class="border p-2 rounded w-full"
    />

    <select [(ngModel)]="selectedCategory" class="border p-2 rounded w-full">
      <option value="">All Categories</option>
      <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
    </select>

    <select [(ngModel)]="accessFilter" class="border p-2 rounded w-full">
      <option value="all">All Access</option>
      <option value="free">Free (✅)</option>
      <option value="paid">Paid (🔒)</option>
    </select>
  </div>

  <!-- Grid Display -->
  <div class="grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
    <div
      *ngFor="let course of paginatedCourses()"
      class="bg-white border rounded-lg shadow hover:shadow-lg transition duration-300 p-4 flex flex-col"
    >
      <!-- Placeholder Image -->
      <img src="https://via.placeholder.com/400x200" alt="Course thumbnail" class="mb-4 rounded">

      <h2 class="text-xl font-semibold mb-2">{{ course.titre }}</h2>
      <p class="text-gray-700 mb-1"><span class="font-medium">Category:</span> {{ course.categorie }}</p>


      <p class="flex items-center gap-2 mb-2">
        <span class="font-medium">Access:</span>
        <span [ngClass]="course.estPayant ? 'text-red-600' : 'text-green-600'" class="flex items-center gap-1">
          <ng-container *ngIf="course.estPayant; else free">
            <span class="text-xl">🔒</span> Paid
          </ng-container>
          <ng-template #free>
            <span class="text-xl">✅</span> Free
          </ng-template>
        </span>
      </p>

      <p class="text-gray-600 text-sm mb-2">
        <span class="font-medium">Instructor:</span> {{ course.formateurNom }}
      </p>

      <p class="text-sm text-gray-600 mb-4 line-clamp-3">
        {{ course.courseContent?.textContent }}
      </p>

      <div class="mt-auto">
        <a
          *ngIf="course.courseContent?.videoUrls?.length"
          [href]="course.courseContent.videoUrls[0]"
          target="_blank"
          class="inline-block text-blue-600 hover:underline text-sm"
        >
          ▶️ Watch Intro Video
        </a>
      </div>
    </div>
  </div>

  <!-- Pagination -->
  <div class="mt-8 flex justify-center items-center gap-4">
    <button (click)="prevPage()" [disabled]="currentPage === 1" class="px-3 py-1 bg-gray-300 rounded hover:bg-gray-400">
      Prev
    </button>

    <span>Page {{ currentPage }} of {{ totalPages() }}</span>

    <button (click)="nextPage()" [disabled]="currentPage === totalPages()" class="px-3 py-1 bg-gray-300 rounded hover:bg-gray-400">
      Next
    </button>
  </div>
</div>
